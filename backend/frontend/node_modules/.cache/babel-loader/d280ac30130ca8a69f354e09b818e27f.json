{"ast":null,"code":"import _toConsumableArray from\"/home/adrian/DiMOP/backend/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/home/adrian/DiMOP/backend/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/adrian/DiMOP/backend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/adrian/DiMOP/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useContext,useState,useEffect}from\"react\";//Components\nimport{MainContext}from\"./MainContext.jsx\";import Tabs from\"./AddComponentTabs.jsx\";//Material UI\nimport Button from\"@material-ui/core/Button\";import{makeStyles,MuiThemeProvider,createMuiTheme}from\"@material-ui/core/styles\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import HighlightOffIcon from\"@material-ui/icons/HighlightOff\";import AddIcon from\"@material-ui/icons/Add\";import Grid from\"@material-ui/core/Grid\";import Stepper from\"@material-ui/core/Stepper\";import Step from\"@material-ui/core/Step\";import StepLabel from\"@material-ui/core/StepLabel\";import Typography from\"@material-ui/core/Typography\";import FormControl from\"@material-ui/core/FormControl\";import Select from\"@material-ui/core/Select\";import MenuItem from\"@material-ui/core/MenuItem\";import InputLabel from\"@material-ui/core/InputLabel\";import Card from\"@material-ui/core/Card\";import CardContent from\"@material-ui/core/CardContent\";import WarningIcon from\"@material-ui/icons/Warning\";// css theme\nvar useStyles=makeStyles(function(theme){return{root:{\"& > *\":{margin:theme.spacing(1),width:\"25ch\"}},buttons:{borderColor:\"#005000\",color:\"#005000\",textTransform:\"none\",margin:20,height:30,width:220},buttons2:{borderColor:\"#005000\",color:\"#005000\",textTransform:\"none\",margin:20,height:30,width:120},formControl:{minWidth:200,marginBottom:50},root_card:{marginLeft:50,marginRight:50,marginTop:20,marginBottom:20,height:100,width:200}};});var muiTheme=createMuiTheme({palette:{action:{disabled:\"white\"}},overrides:{MuiStepIcon:{root:{color:\"lightgrey\",\"&$active\":{color:\"grey\"},\"&$completed\":{color:\"#005000\"}}}}});var AddMaterialDialog=function AddMaterialDialog(){var classes=useStyles();var _useContext=useContext(MainContext),add_component_open=_useContext.add_component_open,selected_material=_useContext.selected_material,parent_material=_useContext.parent_material,data_backend=_useContext.data_backend,highest_level_id=_useContext.highest_level_id,add_component_mode=_useContext.add_component_mode,bom_updated=_useContext.bom_updated,active_step=_useContext.active_step,selection_atomic=_useContext.selection_atomic,material_created=_useContext.material_created;var _material_created=_slicedToArray(material_created,2),materialCreated=_material_created[0],setMaterialCreated=_material_created[1];var _active_step=_slicedToArray(active_step,2),activeStep=_active_step[0],setActiveStep=_active_step[1];var _add_component_open=_slicedToArray(add_component_open,2),addComponentOpen=_add_component_open[0],setAddComponentOpen=_add_component_open[1];var _data_backend=_slicedToArray(data_backend,2),dataBackend=_data_backend[0],setDataBackend=_data_backend[1];var _selected_material=_slicedToArray(selected_material,2),selectedMaterial=_selected_material[0],setSelectedMaterial=_selected_material[1];var _parent_material=_slicedToArray(parent_material,2),parentMaterial=_parent_material[0],setParentMaterial=_parent_material[1];var _highest_level_id=_slicedToArray(highest_level_id,2),highestLevelId=_highest_level_id[0],setHighestLevelId=_highest_level_id[1];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),relations=_useState2[0],setRelations=_useState2[1];var _add_component_mode=_slicedToArray(add_component_mode,2),addComponentMode=_add_component_mode[0],setAddComponentMode=_add_component_mode[1];var _bom_updated=_slicedToArray(bom_updated,2),bomUpdated=_bom_updated[0],setBomUpdated=_bom_updated[1];var _selection_atomic=_slicedToArray(selection_atomic,2),selectionAtomic=_selection_atomic[0],setSelectionAtomic=_selection_atomic[1];var handleClickOpen=function handleClickOpen(){setAddComponentOpen(true);};var handleClose=function handleClose(){setAddComponentOpen(false);};var handleDropdownChange=function handleDropdownChange(event,id){console.log(id);console.log(event.target.value);setRelations(_objectSpread({},relations,_defineProperty({},id,event.target.value)));};//To filter backend for unique mat_id\nvar setObj=new Set();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),relationError=_useState4[0],setRelationError=_useState4[1];useEffect(function(){if(addComponentMode===\"new\"){fetch(\"http://localhost:5000/mat/newest\").then(function(res){return res.json();}).then(function(d){console.log(d);setSelectedMaterial(d);});}else{}},[materialCreated]);var addComponentAndRelations=function addComponentAndRelations(){if(addComponentMode===\"new\"|addComponentMode===\"existing\"){var siblings=[];dataBackend.filter(function(dataBackend){return dataBackend.parent_id==highestLevelId;}).map(function(dataBackend){return siblings.push(dataBackend.mat_id);});var siblings_unique=_toConsumableArray(new Set(siblings));if(siblings_unique.length==Object.keys(relations).length){siblings_unique.map(function(s){//Hier kommt rel hin\nvar requestOptionsRel={method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({p_id:parseInt(parentMaterial),m1_id:parseInt(selectedMaterial),m2_id:parseInt(s),rel_type:parseInt(relations[s])}),redirect:\"follow\"};fetch(\"http://localhost:5000/rel\",requestOptionsRel).then(function(response){return response.text();}).then(function(result){return console.log(result);}).catch(function(error){return console.log(\"error\",error);});});var requestOptionsBom={method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({mat_id:selectedMaterial,parent_mat_id:parentMaterial}),redirect:\"follow\"};fetch(\"http://localhost:5000/bom\",requestOptionsBom).then(function(response){return response.text();}).then(function(result){return console.log(result);}).catch(function(error){return console.log(\"error\",error);});setBomUpdated(true);setActiveStep(steps.length);}else{setRelationError(true);}}//Wenn nicht's ausgewählt wurde (kein Modus)\n};function getSteps(){return[\"Start\",\"Material wählen\",\"Beziehungen festlegen\"];}function getStepContent(step){switch(step){case 0:return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12},\"Bitte w\\xE4hlen Sie zuerst ein Material und legen Sie anschlie\\xDFend die Beziehungen zu seinen Geschwistern fest.\"));case 1:return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12},/*#__PURE__*/React.createElement(Tabs,null)));case 2:return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,justify:\"center\"},/*#__PURE__*/React.createElement(Card,{className:classes.root_card,variant:\"outlined\"},/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{className:classes.title,color:\"textSecondary\",gutterBottom:true,align:\"center\"},\"Parent Material:\"),/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",component:\"h2\",align:\"center\"},parentMaterial))),/*#__PURE__*/React.createElement(Card,{className:classes.root_card,variant:\"outlined\"},/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{className:classes.title,color:\"textSecondary\",gutterBottom:true,align:\"center\"},\"Ausgew\\xE4hltes Material:\"),/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",component:\"h2\",align:\"center\"},selectedMaterial)))),/*#__PURE__*/React.createElement(Typography,{style:{marginTop:20,marginBottom:20}},\"Bitte legen Sie nachfolgend fest, wie das neue Material mit seinen Geschwistermaterialien verbunden sein soll.\"),/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,direction:\"column\"},dataBackend.filter(function(dataBackend){return dataBackend.parent_id==highestLevelId;}).reduce(function(acc,item){if(!setObj.has(item.mat_id)){setObj.add(item.mat_id,item);acc.push(item);}return acc;},[]).map(function(dataBackend){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,direction:\"r0w\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(Typography,null,dataBackend.mat_id,\" \",dataBackend.mat_desc)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6},/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{id:\"demo-simple-select-label\"},\"Verbindungsart\"),/*#__PURE__*/React.createElement(Select,{labelId:\"demo-simple-select-label\",id:dataBackend.mat_id,value:relations[dataBackend.mat_id],onChange:function onChange(e){handleDropdownChange(e,dataBackend.mat_id);}},/*#__PURE__*/React.createElement(MenuItem,{value:1},\"Direkt und l\\xF6slich\"),/*#__PURE__*/React.createElement(MenuItem,{value:2},\"Indirekt und l\\xF6slich\"),/*#__PURE__*/React.createElement(MenuItem,{value:3},\"Direkt und nicht l\\xF6slich\"),/*#__PURE__*/React.createElement(MenuItem,{value:4},\"Indirekt und nicht l\\xF6slich\"))))));})),/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,justify:\"center\"},/*#__PURE__*/React.createElement(Button,{className:classes.buttons,onClick:function onClick(){addComponentAndRelations();}},\"Beziehungen anlegen\")),/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,justify:\"center\"},relationError?/*#__PURE__*/React.createElement(\"div\",{style:{color:\"red\"}},/*#__PURE__*/React.createElement(WarningIcon,{style:{fontSize:\"small\",marginRight:10}}),\" \",\"Bitte Relationen vollst\\xE4ndig eingeben\"):/*#__PURE__*/React.createElement(\"div\",null)));default:return/*#__PURE__*/React.createElement(\"div\",null);}}var steps=getSteps();var handleNext=function handleNext(){setActiveStep(function(prevActiveStep){return prevActiveStep+1;});};var handleBack=function handleBack(){setActiveStep(function(prevActiveStep){return prevActiveStep-1;});};var handleReset=function handleReset(){setActiveStep(0);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{className:classes.buttons2,onClick:handleClickOpen},/*#__PURE__*/React.createElement(AddIcon,{style:{marginRight:5}}),\"Hinzuf\\xFCgen\"),/*#__PURE__*/React.createElement(Dialog,{open:addComponentOpen,onClose:function onClose(){handleClose();handleReset();},\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(HighlightOffIcon,{style:{color:\"#005000\"},onClick:function onClick(){handleClose();handleReset();}})),/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Komponente hinzuf\\xFCgen\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(MuiThemeProvider,{theme:muiTheme},selectionAtomic==0?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Stepper,{activeStep:activeStep},steps.map(function(label,index){var stepProps={};var labelProps={};return/*#__PURE__*/React.createElement(Step,Object.assign({key:label},stepProps),/*#__PURE__*/React.createElement(StepLabel,labelProps,label));})),/*#__PURE__*/React.createElement(\"div\",null,activeStep===steps.length?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Typography,{className:classes.instructions},\"Vielen Dank f\\xFCr Ihre Eingaben. Sie k\\xF6nnen den Dialog jetzt schlie\\xDFen.\"),/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,justify:\"center\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){handleReset();handleClose();},className:classes.buttons2},\"Abschlie\\xDFen\"))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Typography,{className:classes.instructions},getStepContent(activeStep)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:3},\" \",/*#__PURE__*/React.createElement(Button,{disabled:activeStep===0,onClick:handleBack,className:classes.buttons2},\"Zur\\xFCck\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:6}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:3},\" \",/*#__PURE__*/React.createElement(Button,{onClick:handleNext,className:classes.buttons2,disabled:activeStep>=steps.length-2},\"Weiter\"))))))):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,justify:\"center\"},/*#__PURE__*/React.createElement(Typography,{className:classes.instructions},\"Diese Komponente ist atomar. Ihr k\\xF6nnen nur Rohmaterialien jedoch keine weiteren Komponenten zugeordnet werden.\"),/*#__PURE__*/React.createElement(Button,{onClick:handleClose,className:classes.buttons2},\"Ok\")))))));};export default AddMaterialDialog;","map":{"version":3,"sources":["/home/adrian/DiMOP/backend/frontend/src/views/Main/AddMaterialDialog.jsx"],"names":["React","useContext","useState","useEffect","MainContext","Tabs","Button","makeStyles","MuiThemeProvider","createMuiTheme","Dialog","DialogActions","DialogContent","DialogTitle","HighlightOffIcon","AddIcon","Grid","Stepper","Step","StepLabel","Typography","FormControl","Select","MenuItem","InputLabel","Card","CardContent","WarningIcon","useStyles","theme","root","margin","spacing","width","buttons","borderColor","color","textTransform","height","buttons2","formControl","minWidth","marginBottom","root_card","marginLeft","marginRight","marginTop","muiTheme","palette","action","disabled","overrides","MuiStepIcon","AddMaterialDialog","classes","add_component_open","selected_material","parent_material","data_backend","highest_level_id","add_component_mode","bom_updated","active_step","selection_atomic","material_created","materialCreated","setMaterialCreated","activeStep","setActiveStep","addComponentOpen","setAddComponentOpen","dataBackend","setDataBackend","selectedMaterial","setSelectedMaterial","parentMaterial","setParentMaterial","highestLevelId","setHighestLevelId","relations","setRelations","addComponentMode","setAddComponentMode","bomUpdated","setBomUpdated","selectionAtomic","setSelectionAtomic","handleClickOpen","handleClose","handleDropdownChange","event","id","console","log","target","value","setObj","Set","relationError","setRelationError","fetch","then","res","json","d","addComponentAndRelations","siblings","filter","parent_id","map","push","mat_id","siblings_unique","length","Object","keys","s","requestOptionsRel","method","headers","Accept","body","JSON","stringify","p_id","parseInt","m1_id","m2_id","rel_type","redirect","response","text","result","catch","error","requestOptionsBom","parent_mat_id","steps","getSteps","getStepContent","step","title","reduce","acc","item","has","add","mat_desc","e","fontSize","handleNext","prevActiveStep","handleBack","handleReset","label","index","stepProps","labelProps","instructions"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useContext, useState, useEffect } from \"react\";\n\n//Components\nimport { MainContext } from \"./MainContext.jsx\";\nimport Tabs from \"./AddComponentTabs.jsx\";\n\n//Material UI\nimport Button from \"@material-ui/core/Button\";\nimport {\n  makeStyles,\n  MuiThemeProvider,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Typography from \"@material-ui/core/Typography\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport WarningIcon from \"@material-ui/icons/Warning\";\n\n// css theme\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    \"& > *\": {\n      margin: theme.spacing(1),\n      width: \"25ch\",\n    },\n  },\n  buttons: {\n    borderColor: \"#005000\",\n    color: \"#005000\",\n    textTransform: \"none\",\n    margin: 20,\n    height: 30,\n    width: 220,\n  },\n  buttons2: {\n    borderColor: \"#005000\",\n    color: \"#005000\",\n    textTransform: \"none\",\n    margin: 20,\n    height: 30,\n    width: 120,\n  },\n  formControl: {\n    minWidth: 200,\n    marginBottom: 50,\n  },\n  root_card: {\n    marginLeft: 50,\n    marginRight: 50,\n    marginTop: 20,\n    marginBottom: 20,\n    height: 100,\n    width: 200,\n  },\n}));\n\nconst muiTheme = createMuiTheme({\n  palette: {\n    action: {\n      disabled: \"white\",\n    },\n  },\n  overrides: {\n    MuiStepIcon: {\n      root: {\n        color: \"lightgrey\",\n        \"&$active\": {\n          color: \"grey\",\n        },\n        \"&$completed\": {\n          color: \"#005000\",\n        },\n      },\n    },\n  },\n});\n\nconst AddMaterialDialog = () => {\n  const classes = useStyles();\n  const {\n    add_component_open,\n    selected_material,\n    parent_material,\n    data_backend,\n    highest_level_id,\n    add_component_mode,\n    bom_updated,\n    active_step,\n    selection_atomic,\n    material_created,\n  } = useContext(MainContext);\n\n  const [materialCreated, setMaterialCreated] = material_created;\n  const [activeStep, setActiveStep] = active_step;\n  const [addComponentOpen, setAddComponentOpen] = add_component_open;\n  const [dataBackend, setDataBackend] = data_backend;\n  const [selectedMaterial, setSelectedMaterial] = selected_material;\n  const [parentMaterial, setParentMaterial] = parent_material;\n  const [highestLevelId, setHighestLevelId] = highest_level_id;\n  const [relations, setRelations] = useState({});\n  const [addComponentMode, setAddComponentMode] = add_component_mode;\n  const [bomUpdated, setBomUpdated] = bom_updated;\n\n  const [selectionAtomic, setSelectionAtomic] = selection_atomic;\n\n  const handleClickOpen = () => {\n    setAddComponentOpen(true);\n  };\n\n  const handleClose = () => {\n    setAddComponentOpen(false);\n  };\n\n  const handleDropdownChange = (event, id) => {\n    console.log(id);\n    console.log(event.target.value);\n    setRelations({ ...relations, [id]: event.target.value });\n  };\n\n  //To filter backend for unique mat_id\n  var setObj = new Set();\n\n  const [relationError, setRelationError] = useState(false);\n\n  useEffect(() => {\n    if (addComponentMode === \"new\") {\n      fetch(\"http://localhost:5000/mat/newest\")\n        .then((res) => {\n          return res.json();\n        })\n        .then((d) => {\n          console.log(d);\n          setSelectedMaterial(d);\n        });\n    } else {\n    }\n  }, [materialCreated]);\n\n  const addComponentAndRelations = () => {\n    if ((addComponentMode === \"new\") | (addComponentMode === \"existing\")) {\n      const siblings = [];\n\n      dataBackend\n        .filter((dataBackend) => dataBackend.parent_id == highestLevelId)\n        .map((dataBackend) => siblings.push(dataBackend.mat_id));\n\n      const siblings_unique = [...new Set(siblings)];\n\n      if (siblings_unique.length == Object.keys(relations).length) {\n        siblings_unique.map((s) => {\n          //Hier kommt rel hin\n          const requestOptionsRel = {\n            method: \"POST\",\n            headers: {\n              Accept: \"application/json\",\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              p_id: parseInt(parentMaterial),\n              m1_id: parseInt(selectedMaterial),\n              m2_id: parseInt(s),\n              rel_type: parseInt(relations[s]),\n            }),\n            redirect: \"follow\",\n          };\n\n          fetch(\"http://localhost:5000/rel\", requestOptionsRel)\n            .then((response) => response.text())\n            .then((result) => console.log(result))\n            .catch((error) => console.log(\"error\", error));\n        });\n\n        const requestOptionsBom = {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            mat_id: selectedMaterial,\n            parent_mat_id: parentMaterial,\n          }),\n          redirect: \"follow\",\n        };\n\n        fetch(\"http://localhost:5000/bom\", requestOptionsBom)\n          .then((response) => response.text())\n          .then((result) => console.log(result))\n          .catch((error) => console.log(\"error\", error));\n\n        setBomUpdated(true);\n        setActiveStep(steps.length);\n      } else {\n        setRelationError(true);\n      }\n    }\n    //Wenn nicht's ausgewählt wurde (kein Modus)\n  };\n\n  function getSteps() {\n    return [\"Start\", \"Material wählen\", \"Beziehungen festlegen\"];\n  }\n\n  function getStepContent(step) {\n    switch (step) {\n      case 0:\n        return (\n          <div>\n            <Grid container item xs={12}>\n              Bitte wählen Sie zuerst ein Material und legen Sie anschließend\n              die Beziehungen zu seinen Geschwistern fest.\n            </Grid>\n          </div>\n        );\n      case 1:\n        return (\n          <div>\n            <Grid container item xs={12}>\n              <Tabs></Tabs>\n            </Grid>\n          </div>\n        );\n      case 2:\n        return (\n          <div>\n            <Grid container item xs={12} justify=\"center\">\n              <Card className={classes.root_card} variant=\"outlined\">\n                <CardContent>\n                  <Typography\n                    className={classes.title}\n                    color=\"textSecondary\"\n                    gutterBottom\n                    align=\"center\"\n                  >\n                    Parent Material:\n                  </Typography>\n                  <Typography variant=\"h5\" component=\"h2\" align=\"center\">\n                    {parentMaterial}\n                  </Typography>\n                </CardContent>\n              </Card>\n              <Card className={classes.root_card} variant=\"outlined\">\n                <CardContent>\n                  <Typography\n                    className={classes.title}\n                    color=\"textSecondary\"\n                    gutterBottom\n                    align=\"center\"\n                  >\n                    Ausgewähltes Material:\n                  </Typography>\n                  <Typography variant=\"h5\" component=\"h2\" align=\"center\">\n                    {selectedMaterial}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n            <Typography style={{ marginTop: 20, marginBottom: 20 }}>\n              Bitte legen Sie nachfolgend fest, wie das neue Material mit seinen\n              Geschwistermaterialien verbunden sein soll.\n            </Typography>\n            <Grid container item xs={12} direction=\"column\">\n              {dataBackend\n                .filter(\n                  (dataBackend) => dataBackend.parent_id == highestLevelId\n                )\n                .reduce((acc, item) => {\n                  if (!setObj.has(item.mat_id)) {\n                    setObj.add(item.mat_id, item);\n                    acc.push(item);\n                  }\n                  return acc;\n                }, [])\n\n                .map((dataBackend) => (\n                  <div>\n                    <Grid container item xs={12} direction=\"r0w\">\n                      <Grid item xs={6}>\n                        <Typography>\n                          {dataBackend.mat_id} {dataBackend.mat_desc}\n                        </Typography>\n                      </Grid>\n                      <Grid item xs={6}>\n                        <FormControl className={classes.formControl}>\n                          <InputLabel id=\"demo-simple-select-label\">\n                            Verbindungsart\n                          </InputLabel>\n                          <Select\n                            labelId=\"demo-simple-select-label\"\n                            id={dataBackend.mat_id}\n                            value={relations[dataBackend.mat_id]}\n                            onChange={(e) => {\n                              handleDropdownChange(e, dataBackend.mat_id);\n                            }}\n                          >\n                            <MenuItem value={1}>Direkt und löslich</MenuItem>\n                            <MenuItem value={2}>Indirekt und löslich</MenuItem>\n                            <MenuItem value={3}>\n                              Direkt und nicht löslich\n                            </MenuItem>\n                            <MenuItem value={4}>\n                              Indirekt und nicht löslich\n                            </MenuItem>\n                          </Select>\n                        </FormControl>\n                      </Grid>\n                    </Grid>\n                  </div>\n                ))}\n            </Grid>\n            <Grid container item xs={12} justify=\"center\">\n              <Button\n                className={classes.buttons}\n                onClick={() => {\n                  addComponentAndRelations();\n                }}\n              >\n                Beziehungen anlegen\n              </Button>\n            </Grid>\n            <Grid container item xs={12} justify=\"center\">\n              {relationError ? (\n                <div style={{ color: \"red\" }}>\n                  <WarningIcon\n                    style={{\n                      fontSize: \"small\",\n                      marginRight: 10,\n                    }}\n                  ></WarningIcon>{\" \"}\n                  Bitte Relationen vollständig eingeben\n                </div>\n              ) : (\n                <div />\n              )}\n            </Grid>\n          </div>\n        );\n      default:\n        return <div></div>;\n    }\n  }\n\n  const steps = getSteps();\n\n  const handleNext = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return (\n    <div>\n      <Button className={classes.buttons2} onClick={handleClickOpen}>\n        <AddIcon style={{ marginRight: 5 }}></AddIcon>\n        Hinzufügen\n      </Button>\n      <Dialog\n        open={addComponentOpen}\n        onClose={() => {\n          handleClose();\n          handleReset();\n        }}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogActions>\n          <HighlightOffIcon\n            style={{ color: \"#005000\" }}\n            onClick={() => {\n              handleClose();\n              handleReset();\n            }}\n          ></HighlightOffIcon>\n        </DialogActions>\n        <DialogTitle id=\"form-dialog-title\">Komponente hinzufügen</DialogTitle>\n        <DialogContent>\n          <MuiThemeProvider theme={muiTheme}>\n            {selectionAtomic == 0 ? (\n              <div>\n                <Stepper activeStep={activeStep}>\n                  {steps.map((label, index) => {\n                    const stepProps = {};\n                    const labelProps = {};\n\n                    return (\n                      <Step key={label} {...stepProps}>\n                        <StepLabel {...labelProps}>{label}</StepLabel>\n                      </Step>\n                    );\n                  })}\n                </Stepper>\n                <div>\n                  {activeStep === steps.length ? (\n                    <div>\n                      <Typography className={classes.instructions}>\n                        Vielen Dank für Ihre Eingaben. Sie können den Dialog\n                        jetzt schließen.\n                      </Typography>\n\n                      <Grid container item xs={12} justify=\"center\">\n                        <Button\n                          onClick={() => {\n                            handleReset();\n                            handleClose();\n                          }}\n                          className={classes.buttons2}\n                        >\n                          Abschließen\n                        </Button>\n                      </Grid>\n                    </div>\n                  ) : (\n                    <div>\n                      <Typography className={classes.instructions}>\n                        {getStepContent(activeStep)}\n                      </Typography>\n                      <div>\n                        <Grid container item xs={12} justify=\"center\">\n                          <Grid item xs={3}>\n                            {\" \"}\n                            <Button\n                              disabled={activeStep === 0}\n                              onClick={handleBack}\n                              className={classes.buttons2}\n                            >\n                              Zurück\n                            </Button>\n                          </Grid>\n                          <Grid item xs={6}></Grid>\n                          <Grid item xs={3}>\n                            {\" \"}\n                            <Button\n                              onClick={handleNext}\n                              className={classes.buttons2}\n                              disabled={activeStep >= steps.length - 2}\n                            >\n                              Weiter\n                            </Button>\n                          </Grid>\n                        </Grid>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ) : (\n              <div>\n                <Grid container item xs={12} justify=\"center\">\n                  <Typography className={classes.instructions}>\n                    Diese Komponente ist atomar. Ihr können nur Rohmaterialien\n                    jedoch keine weiteren Komponenten zugeordnet werden.\n                  </Typography>\n                  <Button onClick={handleClose} className={classes.buttons2}>\n                    Ok\n                  </Button>\n                </Grid>\n              </div>\n            )}\n          </MuiThemeProvider>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\nexport default AddMaterialDialog;\n"]},"metadata":{},"sourceType":"module"}