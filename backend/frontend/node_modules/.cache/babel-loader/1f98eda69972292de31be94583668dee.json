{"ast":null,"code":"import{BehaviorSubject}from\"rxjs\";import{handleResponse}from\"../helpers/handle-response\";var currentUserSubject=new BehaviorSubject(JSON.parse(localStorage.getItem(\"currentUser\")));export var authenticationService={login:login,logout:logout,currentUser:currentUserSubject.asObservable(),get currentUserValue(){return currentUserSubject.value;}};function login(username,password){console.log(JSON.stringify({username:username,password:password}));var requestOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({username:username,password:password})};return fetch(\"http://127.0.0.1:5000/auth\",requestOptions).then(handleResponse).then(function(user){// store user details and jwt token in local storage to keep user logged in between page refreshes\nconsole.log(JSON.stringify(user));localStorage.setItem(\"currentUser\",JSON.stringify(user));currentUserSubject.next(user);return user;});}function logout(){// remove user from local storage to log user out\nlocalStorage.removeItem(\"currentUser\");currentUserSubject.next(null);}","map":{"version":3,"sources":["/home/adrian/DiMOP/backend/frontend/src/services/authenticationService.jsx"],"names":["BehaviorSubject","handleResponse","currentUserSubject","JSON","parse","localStorage","getItem","authenticationService","login","logout","currentUser","asObservable","currentUserValue","value","username","password","console","log","stringify","requestOptions","method","headers","body","fetch","then","user","setItem","next","removeItem"],"mappings":"AAAA,OAASA,eAAT,KAAgC,MAAhC,CACA,OAASC,cAAT,KAA+B,4BAA/B,CAEA,GAAMC,CAAAA,kBAAkB,CAAG,GAAIF,CAAAA,eAAJ,CACzBG,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAX,CADyB,CAA3B,CAIA,MAAO,IAAMC,CAAAA,qBAAqB,CAAG,CACnCC,KAAK,CAALA,KADmC,CAEnCC,MAAM,CAANA,MAFmC,CAGnCC,WAAW,CAAER,kBAAkB,CAACS,YAAnB,EAHsB,CAInC,GAAIC,CAAAA,gBAAJ,EAAuB,CACrB,MAAOV,CAAAA,kBAAkB,CAACW,KAA1B,CACD,CANkC,CAA9B,CASP,QAASL,CAAAA,KAAT,CAAeM,QAAf,CAAyBC,QAAzB,CAAmC,CACjCC,OAAO,CAACC,GAAR,CAAYd,IAAI,CAACe,SAAL,CAAe,CAAEJ,QAAQ,CAARA,QAAF,CAAYC,QAAQ,CAARA,QAAZ,CAAf,CAAZ,EACA,GAAMI,CAAAA,cAAc,CAAG,CACrBC,MAAM,CAAE,MADa,CAErBC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAFY,CAGrBC,IAAI,CAAEnB,IAAI,CAACe,SAAL,CAAe,CAAEJ,QAAQ,CAARA,QAAF,CAAYC,QAAQ,CAARA,QAAZ,CAAf,CAHe,CAAvB,CAMA,MAAOQ,CAAAA,KAAK,8BAA+BJ,cAA/B,CAAL,CACJK,IADI,CACCvB,cADD,EAEJuB,IAFI,CAEC,SAACC,IAAD,CAAU,CACd;AACAT,OAAO,CAACC,GAAR,CAAYd,IAAI,CAACe,SAAL,CAAeO,IAAf,CAAZ,EACApB,YAAY,CAACqB,OAAb,CAAqB,aAArB,CAAoCvB,IAAI,CAACe,SAAL,CAAeO,IAAf,CAApC,EACAvB,kBAAkB,CAACyB,IAAnB,CAAwBF,IAAxB,EAEA,MAAOA,CAAAA,IAAP,CACD,CATI,CAAP,CAUD,CAED,QAAShB,CAAAA,MAAT,EAAkB,CAChB;AACAJ,YAAY,CAACuB,UAAb,CAAwB,aAAxB,EACA1B,kBAAkB,CAACyB,IAAnB,CAAwB,IAAxB,EACD","sourcesContent":["import { BehaviorSubject } from \"rxjs\";\nimport { handleResponse } from \"../helpers/handle-response\";\n\nconst currentUserSubject = new BehaviorSubject(\n  JSON.parse(localStorage.getItem(\"currentUser\"))\n);\n\nexport const authenticationService = {\n  login,\n  logout,\n  currentUser: currentUserSubject.asObservable(),\n  get currentUserValue() {\n    return currentUserSubject.value;\n  },\n};\n\nfunction login(username, password) {\n  console.log(JSON.stringify({ username, password }));\n  const requestOptions = {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ username, password }),\n  };\n\n  return fetch(`http://127.0.0.1:5000/auth`, requestOptions)\n    .then(handleResponse)\n    .then((user) => {\n      // store user details and jwt token in local storage to keep user logged in between page refreshes\n      console.log(JSON.stringify(user));\n      localStorage.setItem(\"currentUser\", JSON.stringify(user));\n      currentUserSubject.next(user);\n\n      return user;\n    });\n}\n\nfunction logout() {\n  // remove user from local storage to log user out\n  localStorage.removeItem(\"currentUser\");\n  currentUserSubject.next(null);\n}\n"]},"metadata":{},"sourceType":"module"}