{"ast":null,"code":"import _defineProperty from\"/home/adrian/DiMOP/backend/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/adrian/DiMOP/backend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/adrian/DiMOP/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useContext,useState,useEffect}from\"react\";// Component\nimport{MainContext}from\"./MainContext.jsx\";// Material UI\nimport Button from\"@material-ui/core/Button\";import{makeStyles}from\"@material-ui/core/styles\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import TextField from\"@material-ui/core/TextField\";import Grid from\"@material-ui/core/Grid\";import HighlightOffIcon from\"@material-ui/icons/HighlightOff\";import CreateIcon from\"@material-ui/icons/Create\";// css theme\nvar useStyles=makeStyles(function(theme){return{root:{\"& > *\":{margin:theme.spacing(1),width:\"25ch\"}},buttons:{borderColor:\"#005000\",color:\"#005000\",textTransform:\"none\",margin:20,height:30,width:120}};});var AddBomDialog=function AddBomDialog(){var classes=useStyles();var _useContext=useContext(MainContext),add_bom_open=_useContext.add_bom_open,orga_id=_useContext.orga_id,selected_construction_id=_useContext.selected_construction_id,new_bom_created=_useContext.new_bom_created;var _add_bom_open=_slicedToArray(add_bom_open,2),addBomOpen=_add_bom_open[0],setAddBomOpen=_add_bom_open[1];var _orga_id=_slicedToArray(orga_id,2),orgaId=_orga_id[0],setOrgaId=_orga_id[1];var _selected_constructio=_slicedToArray(selected_construction_id,2),selectedConstructionId=_selected_constructio[0],setSelectedConstructionId=_selected_constructio[1];var _new_bom_created=_slicedToArray(new_bom_created,2),newBomCreated=_new_bom_created[0],setNewBomCreated=_new_bom_created[1];var handleClickBomOpen=function handleClickBomOpen(){setAddBomOpen(true);};var handleClickBomClose=function handleClickBomClose(){setAddBomOpen(false);};var _useState=useState({mat_desc:\"\",mat_desc_int:\"\",mat_id_int:\"\",cad_id:\"\",mara_plast_id:\"\",mat_rw:\"\",height:\"\",width:\"\",depth:\"\",unit:\"mm\",weight:\"\",weight_unit:\"g\",volume:\"\",volume_unit:\"mm^3\"}),_useState2=_slicedToArray(_useState,2),newBom=_useState2[0],setNewBom=_useState2[1];var handleNewBomInputs=function handleNewBomInputs(event){setNewBom(_objectSpread({},newBom,_defineProperty({},event.target.id,event.target.value)));};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showErrorText1=_useState4[0],setShowErrorText1=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showErrorText2=_useState6[0],setShowErrorText2=_useState6[1];var validateBom=function validateBom(){var weightIsFloat=/^\\d+\\.\\d+$/.test(newBom.weight);var weightIsNumeric=/^\\d+$/.test(newBom.weight);var heightIsFloat=/^\\d+\\.\\d+$/.test(newBom.height);var heightIsNumeric=/^\\d+$/.test(newBom.height);var widthIsFloat=/^\\d+\\.\\d+$/.test(newBom.width);var widthIsNumeric=/^\\d+$/.test(newBom.width);var depthIsFloat=/^\\d+\\.\\d+$/.test(newBom.depth);var depthIsNumeric=/^\\d+$/.test(newBom.depth);var volumeIsFloat=/^\\d+\\.\\d+$/.test(newBom.volume);var volumeIsNumeric=/^\\d+$/.test(newBom.volume);if(newBom.mat_desc==\"\"||newBom.weight==\"\"){setShowErrorText1(true);}else if(!weightIsFloat&&!weightIsNumeric||newBom.height!=\"\"&&!heightIsFloat&&!heightIsNumeric||newBom.width!=\"\"&&!widthIsFloat&&!widthIsNumeric||newBom.depth!=\"\"&&!depthIsFloat&&!depthIsNumeric||newBom.volume!=\"\"&&!volumeIsFloat&&!volumeIsNumeric){setShowErrorText2(true);}else{setShowErrorText1(false);setShowErrorText2(false);addBom();handleClickBomClose();}};var addBom=function addBom(){var requestOptions={method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({mat_desc:newBom.mat_desc,mat_desc_int:newBom.mat_desc_int,mat_id_int:newBom.mat_id_int,cad_id:newBom.cad_id,mara_plast_id:parseInt(newBom.mara_plast_id),mat_rw:parseFloat(newBom.mat_rw),height:parseFloat(newBom.height),width:parseFloat(newBom.width),depth:parseFloat(newBom.depth),unit:newBom.unit,weight:parseFloat(newBom.weight),weight_unit:newBom.weight_unit,volume:parseFloat(newBom.volume),volume_unit:newBom.volume_unit,is_atomic:0,orga_id:orgaId,cons_id:selectedConstructionId,del_kz:0}),redirect:\"follow\"};fetch(\"http://localhost:5000/mat\",requestOptions).then(function(response){return response.text();}).then(function(result){return console.log(result);}).catch(function(error){return console.log(\"error\",error);});setNewBomCreated(!newBomCreated);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{className:classes.buttons,onClick:handleClickBomOpen},/*#__PURE__*/React.createElement(CreateIcon,{style:{marginRight:5}}),\"Erstellen\"),/*#__PURE__*/React.createElement(Dialog,{open:addBomOpen,onClose:handleClickBomClose,\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(HighlightOffIcon,{style:{color:\"#005000\"},onClick:handleClickBomClose})),/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Neue St\\xFCckliste erstellen\"),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,justify:\"center\"},/*#__PURE__*/React.createElement(\"form\",{className:classes.root,noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(TextField,{error:showErrorText1,helperText:showErrorText1?\"Bitte füllen Sie dieses Feld aus.\":\"\",required:true,id:\"mat_desc\",label:\"Mat.Bez.\",value:newBom.mat_desc,onChange:handleNewBomInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"mat_desc_int\",label:\"ERP Mat.Bez.\",value:newBom.mat_desc_int,onChange:handleNewBomInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"mat_id_int\",label:\"ERP Mat.Nr.\",value:newBom.mat_id_int,onChange:handleNewBomInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"cad_id\",label:\"CAD Nr.\",value:newBom.cad_id,onChange:handleNewBomInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{error:showErrorText2,helperText:showErrorText2?\"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\":\"\",id:\"height\",label:\"H\\xF6he\",value:newBom.height,onChange:handleNewBomInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{error:showErrorText2,helperText:showErrorText2?\"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\":\"\",id:\"width\",label:\"Breite\",value:newBom.width,onChange:handleNewBomInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{error:showErrorText2,helperText:showErrorText2?\"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\":\"\",id:\"depth\",label:\"Tiefe\",value:newBom.depth,onChange:handleNewBomInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"unit\",label:\"Einheit\",value:newBom.unit,onChange:handleNewBomInputs,margin:\"normal\",disabled:true}),/*#__PURE__*/React.createElement(TextField,{id:\"weight\",label:\"Gewicht\",value:newBom.weight,onChange:handleNewBomInputs,margin:\"normal\",error:showErrorText1,helperText:showErrorText1?\"Bitte füllen Sie dieses Feld mit numerischen Werten oder Gleitkommazahlen aus.\":\"\",required:true}),/*#__PURE__*/React.createElement(TextField,{id:\"weight_unit\",label:\"G. Einheit\",value:newBom.weight_unit,onChange:handleNewBomInputs,margin:\"normal\",disabled:true}),/*#__PURE__*/React.createElement(TextField,{error:showErrorText2,helperText:showErrorText2?\"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\":\"\",id:\"volume\",label:\"Volumen\",value:newBom.volume,onChange:handleNewBomInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"volume_unit\",label:\"V. Einheit\",value:newBom.volume_unit,onChange:handleNewBomInputs,margin:\"normal\",disabled:true}))),/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:4}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:2},\" \",/*#__PURE__*/React.createElement(Button,{className:classes.buttons,onClick:handleClickBomClose},\"Abbrechen\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:2},/*#__PURE__*/React.createElement(Button,{className:classes.buttons,onClick:validateBom},\"Erstellen\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4})))));};export default AddBomDialog;","map":{"version":3,"sources":["/home/adrian/DiMOP/backend/frontend/src/views/Main/AddBomDialog.jsx"],"names":["React","useContext","useState","useEffect","MainContext","Button","makeStyles","Dialog","DialogActions","DialogContent","DialogTitle","TextField","Grid","HighlightOffIcon","CreateIcon","useStyles","theme","root","margin","spacing","width","buttons","borderColor","color","textTransform","height","AddBomDialog","classes","add_bom_open","orga_id","selected_construction_id","new_bom_created","addBomOpen","setAddBomOpen","orgaId","setOrgaId","selectedConstructionId","setSelectedConstructionId","newBomCreated","setNewBomCreated","handleClickBomOpen","handleClickBomClose","mat_desc","mat_desc_int","mat_id_int","cad_id","mara_plast_id","mat_rw","depth","unit","weight","weight_unit","volume","volume_unit","newBom","setNewBom","handleNewBomInputs","event","target","id","value","showErrorText1","setShowErrorText1","showErrorText2","setShowErrorText2","validateBom","weightIsFloat","test","weightIsNumeric","heightIsFloat","heightIsNumeric","widthIsFloat","widthIsNumeric","depthIsFloat","depthIsNumeric","volumeIsFloat","volumeIsNumeric","addBom","requestOptions","method","headers","Accept","body","JSON","stringify","parseInt","parseFloat","is_atomic","cons_id","del_kz","redirect","fetch","then","response","text","result","console","log","catch","error","marginRight"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useContext, useState, useEffect } from \"react\";\n\n// Component\nimport { MainContext } from \"./MainContext.jsx\";\n\n// Material UI\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport HighlightOffIcon from \"@material-ui/icons/HighlightOff\";\nimport CreateIcon from \"@material-ui/icons/Create\";\n\n// css theme\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    \"& > *\": {\n      margin: theme.spacing(1),\n      width: \"25ch\",\n    },\n  },\n  buttons: {\n    borderColor: \"#005000\",\n    color: \"#005000\",\n    textTransform: \"none\",\n    margin: 20,\n    height: 30,\n    width: 120,\n  },\n}));\n\nconst AddBomDialog = () => {\n  const classes = useStyles();\n\n  const {\n    add_bom_open,\n    orga_id,\n    selected_construction_id,\n    new_bom_created,\n  } = useContext(MainContext);\n\n  const [addBomOpen, setAddBomOpen] = add_bom_open;\n  const [orgaId, setOrgaId] = orga_id;\n  const [\n    selectedConstructionId,\n    setSelectedConstructionId,\n  ] = selected_construction_id;\n  const [newBomCreated, setNewBomCreated] = new_bom_created;\n\n  const handleClickBomOpen = () => {\n    setAddBomOpen(true);\n  };\n\n  const handleClickBomClose = () => {\n    setAddBomOpen(false);\n  };\n\n  const [newBom, setNewBom] = useState({\n    mat_desc: \"\",\n    mat_desc_int: \"\",\n    mat_id_int: \"\",\n    cad_id: \"\",\n    mara_plast_id: \"\",\n    mat_rw: \"\",\n    height: \"\",\n    width: \"\",\n    depth: \"\",\n    unit: \"mm\",\n    weight: \"\",\n    weight_unit: \"g\",\n    volume: \"\",\n    volume_unit: \"mm^3\",\n  });\n\n  const handleNewBomInputs = (event) => {\n    setNewBom({ ...newBom, [event.target.id]: event.target.value });\n  };\n\n  const [showErrorText1, setShowErrorText1] = useState(false);\n  const [showErrorText2, setShowErrorText2] = useState(false);\n\n  const validateBom = () => {\n    var weightIsFloat = /^\\d+\\.\\d+$/.test(newBom.weight);\n    var weightIsNumeric = /^\\d+$/.test(newBom.weight);\n    var heightIsFloat = /^\\d+\\.\\d+$/.test(newBom.height);\n    var heightIsNumeric = /^\\d+$/.test(newBom.height);\n    var widthIsFloat = /^\\d+\\.\\d+$/.test(newBom.width);\n    var widthIsNumeric = /^\\d+$/.test(newBom.width);\n    var depthIsFloat = /^\\d+\\.\\d+$/.test(newBom.depth);\n    var depthIsNumeric = /^\\d+$/.test(newBom.depth);\n    var volumeIsFloat = /^\\d+\\.\\d+$/.test(newBom.volume);\n    var volumeIsNumeric = /^\\d+$/.test(newBom.volume);\n\n    if (newBom.mat_desc == \"\" || newBom.weight == \"\") {\n      setShowErrorText1(true);\n    } else if (\n      (!weightIsFloat && !weightIsNumeric) ||\n      (newBom.height != \"\" && !heightIsFloat && !heightIsNumeric) ||\n      (newBom.width != \"\" && !widthIsFloat && !widthIsNumeric) ||\n      (newBom.depth != \"\" && !depthIsFloat && !depthIsNumeric) ||\n      (newBom.volume != \"\" && !volumeIsFloat && !volumeIsNumeric)\n    ) {\n      setShowErrorText2(true);\n    } else {\n      setShowErrorText1(false);\n      setShowErrorText2(false);\n      addBom();\n      handleClickBomClose();\n    }\n  };\n\n  const addBom = () => {\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        mat_desc: newBom.mat_desc,\n        mat_desc_int: newBom.mat_desc_int,\n        mat_id_int: newBom.mat_id_int,\n        cad_id: newBom.cad_id,\n        mara_plast_id: parseInt(newBom.mara_plast_id),\n        mat_rw: parseFloat(newBom.mat_rw),\n        height: parseFloat(newBom.height),\n        width: parseFloat(newBom.width),\n        depth: parseFloat(newBom.depth),\n        unit: newBom.unit,\n        weight: parseFloat(newBom.weight),\n        weight_unit: newBom.weight_unit,\n        volume: parseFloat(newBom.volume),\n        volume_unit: newBom.volume_unit,\n        is_atomic: 0,\n        orga_id: orgaId,\n        cons_id: selectedConstructionId,\n        del_kz: 0,\n      }),\n      redirect: \"follow\",\n    };\n\n    fetch(\"http://localhost:5000/mat\", requestOptions)\n      .then((response) => response.text())\n      .then((result) => console.log(result))\n      .catch((error) => console.log(\"error\", error));\n\n    setNewBomCreated(!newBomCreated);\n  };\n\n  return (\n    <div>\n      <Button className={classes.buttons} onClick={handleClickBomOpen}>\n        <CreateIcon style={{ marginRight: 5 }}></CreateIcon>\n        Erstellen\n      </Button>\n      <Dialog\n        open={addBomOpen}\n        onClose={handleClickBomClose}\n        aria-labelledby=\"form-dialog-title\"\n      >\n        <DialogActions>\n          <HighlightOffIcon\n            style={{ color: \"#005000\" }}\n            onClick={handleClickBomClose}\n          ></HighlightOffIcon>\n        </DialogActions>\n        <DialogTitle id=\"form-dialog-title\">\n          Neue Stückliste erstellen\n        </DialogTitle>\n        <DialogContent>\n          <Grid container item xs={12} justify=\"center\">\n            <form className={classes.root} noValidate autoComplete=\"off\">\n              <TextField\n                error={showErrorText1}\n                helperText={\n                  showErrorText1 ? \"Bitte füllen Sie dieses Feld aus.\" : \"\"\n                }\n                required\n                id=\"mat_desc\"\n                label=\"Mat.Bez.\"\n                value={newBom.mat_desc}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n              />\n              <TextField\n                id=\"mat_desc_int\"\n                label=\"ERP Mat.Bez.\"\n                value={newBom.mat_desc_int}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n              />\n              <TextField\n                id=\"mat_id_int\"\n                label=\"ERP Mat.Nr.\"\n                value={newBom.mat_id_int}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n              />\n              <TextField\n                id=\"cad_id\"\n                label=\"CAD Nr.\"\n                value={newBom.cad_id}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n              />\n              <TextField\n                error={showErrorText2}\n                helperText={\n                  showErrorText2\n                    ? \"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\"\n                    : \"\"\n                }\n                id=\"height\"\n                label=\"Höhe\"\n                value={newBom.height}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n              />\n              <TextField\n                error={showErrorText2}\n                helperText={\n                  showErrorText2\n                    ? \"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\"\n                    : \"\"\n                }\n                id=\"width\"\n                label=\"Breite\"\n                value={newBom.width}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n              />\n              <TextField\n                error={showErrorText2}\n                helperText={\n                  showErrorText2\n                    ? \"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\"\n                    : \"\"\n                }\n                id=\"depth\"\n                label=\"Tiefe\"\n                value={newBom.depth}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n              />\n\n              <TextField\n                id=\"unit\"\n                label=\"Einheit\"\n                value={newBom.unit}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n                disabled\n              />\n\n              <TextField\n                id=\"weight\"\n                label=\"Gewicht\"\n                value={newBom.weight}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n                error={showErrorText1}\n                helperText={\n                  showErrorText1\n                    ? \"Bitte füllen Sie dieses Feld mit numerischen Werten oder Gleitkommazahlen aus.\"\n                    : \"\"\n                }\n                required\n              />\n\n              <TextField\n                id=\"weight_unit\"\n                label=\"G. Einheit\"\n                value={newBom.weight_unit}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n                disabled\n              />\n\n              <TextField\n                error={showErrorText2}\n                helperText={\n                  showErrorText2\n                    ? \"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\"\n                    : \"\"\n                }\n                id=\"volume\"\n                label=\"Volumen\"\n                value={newBom.volume}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n              />\n\n              <TextField\n                id=\"volume_unit\"\n                label=\"V. Einheit\"\n                value={newBom.volume_unit}\n                onChange={handleNewBomInputs}\n                margin=\"normal\"\n                disabled\n              />\n            </form>\n          </Grid>\n          <Grid container item xs={12} justify=\"center\">\n            <Grid item xs={4}></Grid>\n            <Grid item xs={2}>\n              {\" \"}\n              <Button className={classes.buttons} onClick={handleClickBomClose}>\n                Abbrechen\n              </Button>\n            </Grid>\n            <Grid item xs={2}>\n              <Button className={classes.buttons} onClick={validateBom}>\n                Erstellen\n              </Button>\n            </Grid>\n            <Grid item xs={4}></Grid>\n          </Grid>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\nexport default AddBomDialog;\n"]},"metadata":{},"sourceType":"module"}