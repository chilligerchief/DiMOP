{"ast":null,"code":"import _defineProperty from\"/Users/top63vj/Documents/GitHub/DiMOP_backend/backend/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/top63vj/Documents/GitHub/DiMOP_backend/backend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/top63vj/Documents/GitHub/DiMOP_backend/backend/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState}from\"react\";//Components\nimport{MainContext}from\"./MainContext.jsx\";//Material UI\nimport{makeStyles}from\"@material-ui/core/styles\";import TextField from\"@material-ui/core/TextField\";import Button from\"@material-ui/core/Button\";import Grid from\"@material-ui/core/Grid\";import Radio from\"@material-ui/core/Radio\";import RadioGroup from\"@material-ui/core/RadioGroup\";import FormControlLabel from\"@material-ui/core/FormControlLabel\";import FormControl from\"@material-ui/core/FormControl\";import FormLabel from\"@material-ui/core/FormLabel\";import Tooltip from\"@material-ui/core/Tooltip\";import Typography from\"@material-ui/core/Typography\";import HelpIcon from\"@material-ui/icons/Help\";var useStyles=makeStyles(function(theme){return{root:{\"& > *\":{margin:theme.spacing(1),width:\"25ch\"}},buttons:{borderColor:\"#005000\",color:\"#005000\",textTransform:\"none\",margin:20,height:60,width:120}};});var MaterialFertNew=function MaterialFertNew(saveItem){var classes=useStyles();var _useContext=useContext(MainContext),add_component_open=_useContext.add_component_open,selected_construction_id=_useContext.selected_construction_id,new_bom_created=_useContext.new_bom_created,orga_id=_useContext.orga_id,add_component_mode=_useContext.add_component_mode,active_step=_useContext.active_step,material_created=_useContext.material_created;var _material_created=_slicedToArray(material_created,2),materialCreated=_material_created[0],setMaterialCreated=_material_created[1];var _active_step=_slicedToArray(active_step,2),activeStep=_active_step[0],setActiveStep=_active_step[1];var _add_component_open=_slicedToArray(add_component_open,2),addComponentOpen=_add_component_open[0],setAddComponentOpen=_add_component_open[1];var _selected_constructio=_slicedToArray(selected_construction_id,2),selectedConstructionId=_selected_constructio[0],setSelectedConstructionId=_selected_constructio[1];var _new_bom_created=_slicedToArray(new_bom_created,2),newBomCreated=_new_bom_created[0],setNewBomCreated=_new_bom_created[1];var _orga_id=_slicedToArray(orga_id,2),orgaId=_orga_id[0],setOrgaId=_orga_id[1];var _add_component_mode=_slicedToArray(add_component_mode,2),addComponentMode=_add_component_mode[0],setAddComponentMode=_add_component_mode[1];var _useState=useState({mat_desc:\"\",mat_desc_int:\"\",mat_id_int:\"\",cad_id:\"\",mara_plast_id:\"\",mat_rw:\"\",height:\"\",width:\"\",depth:\"\",unit:\"mm\",weight:\"\",weight_unit:\"g\",volume:\"\",volume_unit:\"mm^3\"}),_useState2=_slicedToArray(_useState,2),newMaterial=_useState2[0],setNewMaterial=_useState2[1];var _useState3=useState(\"1\"),_useState4=_slicedToArray(_useState3,2),isAtomic=_useState4[0],setIsAtomic=_useState4[1];var handleNewMaterialInputs=function handleNewMaterialInputs(event){setNewMaterial(_objectSpread({},newMaterial,_defineProperty({},event.target.id,event.target.value)));};var handleRadioChange=function handleRadioChange(event){setIsAtomic(event.target.value);};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showErrorText1=_useState6[0],setShowErrorText1=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showErrorText2=_useState8[0],setShowErrorText2=_useState8[1];var validateNewMat=function validateNewMat(){var weightIsFloat=/^\\d+\\.\\d+$/.test(newMaterial.weight);var weightIsNumeric=/^\\d+$/.test(newMaterial.weight);var heightIsFloat=/^\\d+\\.\\d+$/.test(newMaterial.height);var heightIsNumeric=/^\\d+$/.test(newMaterial.height);var widthIsFloat=/^\\d+\\.\\d+$/.test(newMaterial.width);var widthIsNumeric=/^\\d+$/.test(newMaterial.width);var depthIsFloat=/^\\d+\\.\\d+$/.test(newMaterial.depth);var depthIsNumeric=/^\\d+$/.test(newMaterial.depth);var volumeIsFloat=/^\\d+\\.\\d+$/.test(newMaterial.volume);var volumeIsNumeric=/^\\d+$/.test(newMaterial.volume);if(newMaterial.mat_desc==\"\"||newMaterial.weight==\"\"){setShowErrorText1(true);}else if(!weightIsFloat&&!weightIsNumeric||newMaterial.height!=\"\"&&!heightIsFloat&&!heightIsNumeric||newMaterial.width!=\"\"&&!widthIsFloat&&!widthIsNumeric||newMaterial.depth!=\"\"&&!depthIsFloat&&!depthIsNumeric||newMaterial.volume!=\"\"&&!volumeIsFloat&&!volumeIsNumeric){setShowErrorText2(true);}else{setShowErrorText1(false);setShowErrorText2(false);addMaterial();setMaterialCreated(!materialCreated);setAddComponentMode(\"new\");setActiveStep(2);}};var addMaterial=function addMaterial(){var requestOptions={method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({mat_desc:newMaterial.mat_desc,mat_desc_int:newMaterial.mat_desc_int,mat_id_int:newMaterial.mat_id_int,cad_id:newMaterial.cad_id,mara_plast_id:parseInt(newMaterial.mara_plast_id),mat_rw:parseFloat(newMaterial.mat_rw),height:parseFloat(newMaterial.height),width:parseFloat(newMaterial.width),depth:parseFloat(newMaterial.depth),unit:newMaterial.unit,weight:parseFloat(newMaterial.weight),weight_unit:newMaterial.weight_unit,volume:parseFloat(newMaterial.volume),volume_unit:newMaterial.volume_unit,is_atomic:parseInt(isAtomic),orga_id:orgaId,cons_id:selectedConstructionId,del_kz:0}),redirect:\"follow\"};fetch(\"/mat\",requestOptions).then(function(response){return response.text();}).then(function(result){return console.log(result);}).catch(function(error){return console.log(\"error\",error);});setNewBomCreated(!newBomCreated);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{className:classes.root,noValidate:true,autoComplete:\"off\"},/*#__PURE__*/React.createElement(TextField,{error:showErrorText1,helperText:showErrorText1?\"Bitte füllen Sie dieses Feld aus.\":\"\",required:true,id:\"mat_desc\",label:\"Mat.Bez.\",value:newMaterial.mat_desc,onChange:handleNewMaterialInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"mat_desc_int\",label:\"ERP Mat.Bez.\",value:newMaterial.mat_desc_int,onChange:handleNewMaterialInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"mat_id_int\",label:\"ERP Mat.Nr.\",value:newMaterial.mat_id_int,onChange:handleNewMaterialInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"cad_id\",label:\"CAD Nr.\",value:newMaterial.cad_id,onChange:handleNewMaterialInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{error:showErrorText2,helperText:showErrorText2?\"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\":\"\",id:\"height\",label:\"H\\xF6he\",value:newMaterial.height,onChange:handleNewMaterialInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{error:showErrorText2,helperText:showErrorText2?\"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\":\"\",id:\"width\",label:\"Breite\",value:newMaterial.width,onChange:handleNewMaterialInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{error:showErrorText2,helperText:showErrorText2?\"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\":\"\",id:\"depth\",label:\"Tiefe\",value:newMaterial.depth,onChange:handleNewMaterialInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"unit\",label:\"Einheit\",value:newMaterial.unit,onChange:handleNewMaterialInputs,margin:\"normal\",disabled:true}),/*#__PURE__*/React.createElement(TextField,{id:\"weight\",label:\"Gewicht\",value:newMaterial.weight,onChange:handleNewMaterialInputs,margin:\"normal\",error:showErrorText1,helperText:showErrorText1?\"Bitte füllen Sie dieses Feld mit numerischen Werten oder Gleitkommazahlen aus.\":\"\",required:true}),/*#__PURE__*/React.createElement(TextField,{id:\"weight_unit\",label:\"G. Einheit\",value:newMaterial.weight_unit,onChange:handleNewMaterialInputs,margin:\"normal\",disabled:true}),/*#__PURE__*/React.createElement(TextField,{error:showErrorText2,helperText:showErrorText2?\"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\":\"\",id:\"volume\",label:\"Volumen\",value:newMaterial.volume,onChange:handleNewMaterialInputs,margin:\"normal\"}),/*#__PURE__*/React.createElement(TextField,{id:\"volume_unit\",label:\"V. Einheit\",value:newMaterial.volume_unit,onChange:handleNewMaterialInputs,margin:\"normal\",disabled:true}),/*#__PURE__*/React.createElement(FormControl,{component:\"fieldset\"},/*#__PURE__*/React.createElement(FormLabel,{component:\"legend\"},\" \",\"Anlage als St\\xFCckliste?\",/*#__PURE__*/React.createElement(Tooltip,{title:/*#__PURE__*/React.createElement(Typography,{variant:\"body1\"},\"Wird ein Material als St\\xFCckliste angelegt, k\\xF6nnen dem Material Komponenten hinzugef\\xFCgt werden, daf\\xFCr kann kein Rohstoff bzw. Kunststoff zugeordnet werden.\")},/*#__PURE__*/React.createElement(HelpIcon,{style:{marginLeft:10},fontSize:\"small\"}))),/*#__PURE__*/React.createElement(RadioGroup,{\"aria-label\":\"atomic\",value:isAtomic,onChange:handleRadioChange},/*#__PURE__*/React.createElement(FormControlLabel,{value:\"0\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Ja\"}),/*#__PURE__*/React.createElement(FormControlLabel,{value:\"1\",control:/*#__PURE__*/React.createElement(Radio,null),label:\"Nein\"})))),/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,justify:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:4}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4},/*#__PURE__*/React.createElement(Button,{className:classes.buttons,onClick:function onClick(){validateNewMat();}},\"Material anlegen\"),materialCreated?/*#__PURE__*/React.createElement(\"div\",null,\"Neues Material angelegt!\"):/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(Grid,{item:true,xs:4})));};export default MaterialFertNew;","map":{"version":3,"sources":["/Users/top63vj/Documents/GitHub/DiMOP_backend/backend/frontend/src/views/Main/MaterialFertNew.jsx"],"names":["React","useContext","useState","MainContext","makeStyles","TextField","Button","Grid","Radio","RadioGroup","FormControlLabel","FormControl","FormLabel","Tooltip","Typography","HelpIcon","useStyles","theme","root","margin","spacing","width","buttons","borderColor","color","textTransform","height","MaterialFertNew","saveItem","classes","add_component_open","selected_construction_id","new_bom_created","orga_id","add_component_mode","active_step","material_created","materialCreated","setMaterialCreated","activeStep","setActiveStep","addComponentOpen","setAddComponentOpen","selectedConstructionId","setSelectedConstructionId","newBomCreated","setNewBomCreated","orgaId","setOrgaId","addComponentMode","setAddComponentMode","mat_desc","mat_desc_int","mat_id_int","cad_id","mara_plast_id","mat_rw","depth","unit","weight","weight_unit","volume","volume_unit","newMaterial","setNewMaterial","isAtomic","setIsAtomic","handleNewMaterialInputs","event","target","id","value","handleRadioChange","showErrorText1","setShowErrorText1","showErrorText2","setShowErrorText2","validateNewMat","weightIsFloat","test","weightIsNumeric","heightIsFloat","heightIsNumeric","widthIsFloat","widthIsNumeric","depthIsFloat","depthIsNumeric","volumeIsFloat","volumeIsNumeric","addMaterial","requestOptions","method","headers","Accept","body","JSON","stringify","parseInt","parseFloat","is_atomic","cons_id","del_kz","redirect","fetch","then","response","text","result","console","log","catch","error","marginLeft"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\n\n//Components\nimport { MainContext } from \"./MainContext.jsx\";\n\n//Material UI\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Radio from \"@material-ui/core/Radio\";\nimport RadioGroup from \"@material-ui/core/RadioGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport Typography from \"@material-ui/core/Typography\";\nimport HelpIcon from \"@material-ui/icons/Help\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    \"& > *\": {\n      margin: theme.spacing(1),\n      width: \"25ch\",\n    },\n  },\n  buttons: {\n    borderColor: \"#005000\",\n    color: \"#005000\",\n    textTransform: \"none\",\n    margin: 20,\n    height: 60,\n    width: 120,\n  },\n}));\n\nconst MaterialFertNew = (saveItem) => {\n  const classes = useStyles();\n\n  const {\n    add_component_open,\n    selected_construction_id,\n    new_bom_created,\n    orga_id,\n    add_component_mode,\n    active_step,\n    material_created,\n  } = useContext(MainContext);\n\n  const [materialCreated, setMaterialCreated] = material_created;\n  const [activeStep, setActiveStep] = active_step;\n  const [addComponentOpen, setAddComponentOpen] = add_component_open;\n  const [\n    selectedConstructionId,\n    setSelectedConstructionId,\n  ] = selected_construction_id;\n  const [newBomCreated, setNewBomCreated] = new_bom_created;\n  const [orgaId, setOrgaId] = orga_id;\n  const [addComponentMode, setAddComponentMode] = add_component_mode;\n\n  const [newMaterial, setNewMaterial] = useState({\n    mat_desc: \"\",\n    mat_desc_int: \"\",\n    mat_id_int: \"\",\n    cad_id: \"\",\n    mara_plast_id: \"\",\n    mat_rw: \"\",\n    height: \"\",\n    width: \"\",\n    depth: \"\",\n    unit: \"mm\",\n    weight: \"\",\n    weight_unit: \"g\",\n    volume: \"\",\n    volume_unit: \"mm^3\",\n  });\n\n  const [isAtomic, setIsAtomic] = useState(\"1\");\n\n  const handleNewMaterialInputs = (event) => {\n    setNewMaterial({ ...newMaterial, [event.target.id]: event.target.value });\n  };\n\n  const handleRadioChange = (event) => {\n    setIsAtomic(event.target.value);\n  };\n\n  const [showErrorText1, setShowErrorText1] = useState(false);\n  const [showErrorText2, setShowErrorText2] = useState(false);\n\n  const validateNewMat = () => {\n    var weightIsFloat = /^\\d+\\.\\d+$/.test(newMaterial.weight);\n    var weightIsNumeric = /^\\d+$/.test(newMaterial.weight);\n    var heightIsFloat = /^\\d+\\.\\d+$/.test(newMaterial.height);\n    var heightIsNumeric = /^\\d+$/.test(newMaterial.height);\n    var widthIsFloat = /^\\d+\\.\\d+$/.test(newMaterial.width);\n    var widthIsNumeric = /^\\d+$/.test(newMaterial.width);\n    var depthIsFloat = /^\\d+\\.\\d+$/.test(newMaterial.depth);\n    var depthIsNumeric = /^\\d+$/.test(newMaterial.depth);\n    var volumeIsFloat = /^\\d+\\.\\d+$/.test(newMaterial.volume);\n    var volumeIsNumeric = /^\\d+$/.test(newMaterial.volume);\n\n    if (newMaterial.mat_desc == \"\" || newMaterial.weight == \"\") {\n      setShowErrorText1(true);\n    } else if (\n      (!weightIsFloat && !weightIsNumeric) ||\n      (newMaterial.height != \"\" && !heightIsFloat && !heightIsNumeric) ||\n      (newMaterial.width != \"\" && !widthIsFloat && !widthIsNumeric) ||\n      (newMaterial.depth != \"\" && !depthIsFloat && !depthIsNumeric) ||\n      (newMaterial.volume != \"\" && !volumeIsFloat && !volumeIsNumeric)\n    ) {\n      setShowErrorText2(true);\n    } else {\n      setShowErrorText1(false);\n      setShowErrorText2(false);\n      addMaterial();\n      setMaterialCreated(!materialCreated);\n      setAddComponentMode(\"new\");\n      setActiveStep(2);\n    }\n  };\n\n  const addMaterial = () => {\n    const requestOptions = {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        mat_desc: newMaterial.mat_desc,\n        mat_desc_int: newMaterial.mat_desc_int,\n        mat_id_int: newMaterial.mat_id_int,\n        cad_id: newMaterial.cad_id,\n        mara_plast_id: parseInt(newMaterial.mara_plast_id),\n        mat_rw: parseFloat(newMaterial.mat_rw),\n        height: parseFloat(newMaterial.height),\n        width: parseFloat(newMaterial.width),\n        depth: parseFloat(newMaterial.depth),\n        unit: newMaterial.unit,\n        weight: parseFloat(newMaterial.weight),\n        weight_unit: newMaterial.weight_unit,\n        volume: parseFloat(newMaterial.volume),\n        volume_unit: newMaterial.volume_unit,\n        is_atomic: parseInt(isAtomic),\n        orga_id: orgaId,\n        cons_id: selectedConstructionId,\n        del_kz: 0,\n      }),\n      redirect: \"follow\",\n    };\n\n    fetch(\"/mat\", requestOptions)\n      .then((response) => response.text())\n      .then((result) => console.log(result))\n      .catch((error) => console.log(\"error\", error));\n\n    setNewBomCreated(!newBomCreated);\n  };\n\n  return (\n    <div>\n      <form className={classes.root} noValidate autoComplete=\"off\">\n        <TextField\n          error={showErrorText1}\n          helperText={showErrorText1 ? \"Bitte füllen Sie dieses Feld aus.\" : \"\"}\n          required\n          id=\"mat_desc\"\n          label=\"Mat.Bez.\"\n          value={newMaterial.mat_desc}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n        />\n        <TextField\n          id=\"mat_desc_int\"\n          label=\"ERP Mat.Bez.\"\n          value={newMaterial.mat_desc_int}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n        />\n        <TextField\n          id=\"mat_id_int\"\n          label=\"ERP Mat.Nr.\"\n          value={newMaterial.mat_id_int}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n        />\n        <TextField\n          id=\"cad_id\"\n          label=\"CAD Nr.\"\n          value={newMaterial.cad_id}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n        />\n        <TextField\n          error={showErrorText2}\n          helperText={\n            showErrorText2\n              ? \"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\"\n              : \"\"\n          }\n          id=\"height\"\n          label=\"Höhe\"\n          value={newMaterial.height}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n        />\n        <TextField\n          error={showErrorText2}\n          helperText={\n            showErrorText2\n              ? \"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\"\n              : \"\"\n          }\n          id=\"width\"\n          label=\"Breite\"\n          value={newMaterial.width}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n        />\n        <TextField\n          error={showErrorText2}\n          helperText={\n            showErrorText2\n              ? \"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\"\n              : \"\"\n          }\n          id=\"depth\"\n          label=\"Tiefe\"\n          value={newMaterial.depth}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n        />\n\n        <TextField\n          id=\"unit\"\n          label=\"Einheit\"\n          value={newMaterial.unit}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n          disabled\n        />\n\n        <TextField\n          id=\"weight\"\n          label=\"Gewicht\"\n          value={newMaterial.weight}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n          error={showErrorText1}\n          helperText={\n            showErrorText1\n              ? \"Bitte füllen Sie dieses Feld mit numerischen Werten oder Gleitkommazahlen aus.\"\n              : \"\"\n          }\n          required\n        />\n\n        <TextField\n          id=\"weight_unit\"\n          label=\"G. Einheit\"\n          value={newMaterial.weight_unit}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n          disabled\n        />\n\n        <TextField\n          error={showErrorText2}\n          helperText={\n            showErrorText2\n              ? \"Bitte geben Sie nur numerische Werte oder Gleitkommazahlen an.\"\n              : \"\"\n          }\n          id=\"volume\"\n          label=\"Volumen\"\n          value={newMaterial.volume}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n        />\n\n        <TextField\n          id=\"volume_unit\"\n          label=\"V. Einheit\"\n          value={newMaterial.volume_unit}\n          onChange={handleNewMaterialInputs}\n          margin=\"normal\"\n          disabled\n        />\n\n        <FormControl component=\"fieldset\">\n          <FormLabel component=\"legend\">\n            {\" \"}\n            Anlage als Stückliste?\n            <Tooltip\n              title={\n                <Typography variant=\"body1\">\n                  Wird ein Material als Stückliste angelegt, können dem Material\n                  Komponenten hinzugefügt werden, dafür kann kein Rohstoff bzw.\n                  Kunststoff zugeordnet werden.\n                </Typography>\n              }\n            >\n              <HelpIcon style={{ marginLeft: 10 }} fontSize=\"small\"></HelpIcon>\n            </Tooltip>\n          </FormLabel>\n          <RadioGroup\n            aria-label=\"atomic\"\n            value={isAtomic}\n            onChange={handleRadioChange}\n          >\n            <FormControlLabel value=\"0\" control={<Radio />} label=\"Ja\" />\n            <FormControlLabel value=\"1\" control={<Radio />} label=\"Nein\" />\n          </RadioGroup>\n        </FormControl>\n      </form>\n\n      <Grid container item xs={12} justify=\"center\">\n        <Grid item xs={4}></Grid>\n        <Grid item xs={4}>\n          <Button\n            className={classes.buttons}\n            onClick={() => {\n              validateNewMat();\n            }}\n          >\n            Material anlegen\n          </Button>\n          {materialCreated ? <div>Neues Material angelegt!</div> : <div />}\n        </Grid>\n        <Grid item xs={4}></Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default MaterialFertNew;\n"]},"metadata":{},"sourceType":"module"}